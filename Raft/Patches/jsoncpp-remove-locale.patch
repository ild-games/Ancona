From 02bfdfaf6f90e372c2e7c635fea74c5e1fe311f2 Mon Sep 17 00:00:00 2001
From: Tucker Lein <tlein@radford.edu>
Date: Wed, 24 Aug 2016 01:42:05 -0500
Subject: [PATCH] remove android incompatible locale additions

---
 src/lib_json/json_reader.cpp |  1 -
 src/lib_json/json_tool.h     | 13 -------------
 2 files changed, 14 deletions(-)

diff --git a/src/lib_json/json_reader.cpp b/src/lib_json/json_reader.cpp
index b354be3..8bcf7e6 100644
--- a/src/lib_json/json_reader.cpp
+++ b/src/lib_json/json_reader.cpp
@@ -1619,7 +1619,6 @@ bool OurReader::decodeDouble(Token& token, Value& decoded) {
     Char buffer[bufferSize + 1];
     memcpy(buffer, token.start_, ulength);
     buffer[length] = 0;
-    fixNumericLocaleInput(buffer, buffer + length);
     count = sscanf(buffer, format, &value);
   } else {
     JSONCPP_STRING buffer(token.start_, token.end_);
diff --git a/src/lib_json/json_tool.h b/src/lib_json/json_tool.h
index 50391ef..d16d7b8 100644
--- a/src/lib_json/json_tool.h
+++ b/src/lib_json/json_tool.h
@@ -5,7 +5,6 @@
 
 #ifndef LIB_JSONCPP_JSON_TOOL_H_INCLUDED
 #define LIB_JSONCPP_JSON_TOOL_H_INCLUDED
-#include <clocale>
 
 /* This header provides common string manipulation support, such as UTF-8,
  * portable conversion from/to string...
@@ -83,18 +82,6 @@ static inline void fixNumericLocale(char* begin, char* end) {
   }
 }
 
-static inline void fixNumericLocaleInput(char* begin, char* end) {
-  struct lconv* lc = localeconv();
-  if ((lc != NULL) && (*(lc->decimal_point) != '.')) {
-    while (begin < end) {
-      if (*begin == '.') {
-        *begin = *(lc->decimal_point);
-      }
-      ++begin;
-    }
-  }
-}
-
 } // namespace Json {
 
 #endif // LIB_JSONCPP_JSON_TOOL_H_INCLUDED
-- 
2.7.4

